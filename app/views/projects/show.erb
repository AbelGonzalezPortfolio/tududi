<h2 class="mb-5"><i class="bi bi-hexagon ms-3 me-2"></i><%= @project.name.upcase %>
  <div class="dropdown d-inline-block">
    <button class="btn btn-link text-secondary" type="button" id="dropdownMenuButton" data-bs-toggle="dropdown" aria-expanded="false">
      <i class="bi bi-three-dots-vertical fs-6"></i>
    </button>
    <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton">
      <li>
        <a class="dropdown-item" href="#" data-bs-toggle="modal" data-bs-target="#editProjectModal" data-project-id="<%= @project.id %>">
          Edit
        </a>
      </li>
      <li>
        <% if @project %>
          <form id="delete_project_<%= @project.id %>" action="/project/<%= @project.id %>" method="post" class="d-none">
            <input type="hidden" name="_method" value="delete">
          </form>
        <% end %>
        <a class="dropdown-item" href="#" onclick="deleteProject('<%= @project.id %>')">Delete</a>
      </li>
    </ul>
  </div>
</h2>
<% unless @project.description.blank? %>
  <div class="bg-secondary-subtle px-4 py-3 mb-4 mx-3 rounded">
    <%= @project.description %>
  </div>
<% end %>

<%= partial :'tasks/_minimal_form', locals: { task: Task.new(project: @project) } %>

<h4 class="mt-2 ms-4 fw-bold">Tasks</h4>
<div class="mx-3 my-2">
  <% if @project.tasks.incomplete.any? %>
    <% @project.tasks.incomplete.each do |task| %>
      <div id="edit_task_form_<%= task.id %>" class="d-none">
        <%= partial :'tasks/_form', locals: { task: task } %>
      </div>
      <div>
        <%= partial :'tasks/_task', locals: { task: task } %>
      </div>
    <% end %>
  <% else %>
    <div class="rounded px-4 py-2 mb-4 bg-secondary-subtle fw-light opacity-50">
      No tasks have been created yet for this project
    </div>
  <% end %>
</div>

<h4 class="mt-5 ms-4 fw-bold">Notes</h4>
<div class="mx-3 my-2">
  <% if @project.notes.any? %>
    <% @project.notes.each do |note| %>
      <div id="edit_note_form_<%= note.id %>" class="d-none">
        <%= partial :'notes/_form', locals: { note: note } %>
      </div>
      <%= partial :'notes/_note', locals: {note: note} %>
    <% end %>
  <% else %>
    <div class="rounded px-4 py-2 mb-4 bg-secondary-subtle fw-light opacity-50">
      No notes have been created yet for this project
    </div>
  <% end %>
</div>

<%= partial :'projects/_edit_project_modal', locals: { project: @project } %>
<%= partial :'tasks/_edit_task_modal' %>
<%= partial :'notes/_edit_note_modal' %>
